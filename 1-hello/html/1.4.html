<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Shapes.scala</title>
  <link rel="stylesheet"
        href="http://yfcai.github.io/scala/stylesheets/plt-style.css"
        href_not_working="">
</head>
<body>
  <a href="https://github.com/klauso/PLT2012"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
  <header>
  <nav>
    <ul>    
        <li><a href="../../../../html/1.1.html">1.1.html</a></li>
        <li><a href="../../../../html/1.2.html">1.2.html</a></li>
        <li><a href="../../../../html/1.3.html">1.3.html</a></li>
        <li><a href="../../../../html/1.4.html">1.4.html</a></li>
        <li><a href="../../../../html/test.html">test.html</a></li>
    </ul>
  </nav>
  </header>
  <article id="documentation">
    <section id='section-1'>
      <div class="docs"><ul>
<li>Exercise 1.4: Algebraic datatypes</li>
</ul>

<p>Copyright 2014 Yufei Cai <a href="mailto:cai@mathematik.uni-marburg.de">cai@mathematik.uni-marburg.de</a></p>

<p>Adapted from:
Miran Lipovaƒça. Learn You a Haskell for Great Good.
Available online at http://learnyouahaskell.com/</p>

<p>Licensed under:
Creative Commons Attribution-Noncommercial-Sharealike 3.0 Unported
http://creativecommons.org/licenses/by-nc-sa/3.0/</p>

<p>Tasks</p>

<ol>
<li><p>Read through this file to learn about case classes and
pattern-matching in Scala.</p></li>
<li><p>Replace ??? in this file by a working implementation of
<code>circumference</code> so that the test <code>ShapesSpec</code> passes.</p></li>
</ol></div>
      <div class="code"><code class='highlight'><pre><span class="c1">// `trait` is like an abstract class in Java</span>
<span class="k">trait</span> <span class="nc">Shapes</span> <span class="o">{</span></pre></code></div>
    </section>
    <section id='section-2'>
      <div class="docs"><p>Case classes are similar to structs in C.</p></div>
      <div class="code"><code class='highlight'><pre>  <span class="k">case</span> <span class="k">class</span> <span class="nc">Point</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Double</span><span class="o">)</span></pre></code></div>
    </section>
    <section id='section-3'>
      <div class="docs"><p>Create a point</p></div>
      <div class="code"><code class='highlight'><pre>  <span class="k">val</span> <span class="n">origin</span><span class="k">:</span> <span class="kt">Point</span> <span class="o">=</span> <span class="nc">Point</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span></pre></code></div>
    </section>
    <section id='section-4'>
      <div class="docs"><p>Access the x-coordinate.
We may write alternatively</p>

<p>def x_coordinate(p: Point): Double = p.x</p></div>
      <div class="code"><code class='highlight'><pre>  <span class="k">def</span> <span class="n">x_coordinate</span><span class="o">(</span><span class="n">p</span><span class="k">:</span> <span class="kt">Point</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="n">p</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Point</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="k">=&gt;</span>
      <span class="n">x</span>
  <span class="o">}</span></pre></code></div>
    </section>
    <section id='section-5'>
      <div class="docs"><p>Access the y-coordinate.
We may write alternatively</p>

<p>def y_coordinate(p: Point): Double = p.y</p></div>
      <div class="code"><code class='highlight'><pre>  <span class="k">def</span> <span class="n">y_coordinate</span><span class="o">(</span><span class="n">p</span><span class="k">:</span> <span class="kt">Point</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="n">p</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Point</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="k">=&gt;</span>
      <span class="n">y</span>
  <span class="o">}</span></pre></code></div>
    </section>
    <section id='section-6'>
      <div class="docs"><p>It is possible to pattern-match on 2 points at the same time.</p></div>
      <div class="code"><code class='highlight'><pre>  <span class="k">def</span> <span class="n">distance</span><span class="o">(</span><span class="n">p1</span><span class="k">:</span> <span class="kt">Point</span><span class="o">,</span> <span class="n">p2</span><span class="k">:</span> <span class="kt">Point</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="o">(</span><span class="n">p1</span><span class="o">,</span> <span class="n">p2</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="o">(</span><span class="nc">Point</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">y1</span><span class="o">),</span> <span class="nc">Point</span><span class="o">(</span><span class="n">x2</span><span class="o">,</span> <span class="n">y2</span><span class="o">))</span> <span class="k">=&gt;</span>
      <span class="k">val</span> <span class="n">dx</span> <span class="k">=</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span>
      <span class="k">val</span> <span class="n">dy</span> <span class="k">=</span> <span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span>
      <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="o">(</span><span class="n">dx</span> <span class="o">*</span> <span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span> <span class="o">*</span> <span class="n">dy</span><span class="o">)</span>
  <span class="o">}</span></pre></code></div>
    </section>
    <section id='section-7'>
      <div class="docs"><p><code>Circle</code>, <code>Rectangle</code> and <code>Triangle</code> extend the trait <code>Shape</code>.
Given an object of type <code>Shape</code>, we can pattern-match on it
to figure out whether it&rsquo;s a circle, a rectangle or a triangle.</p></div>
      <div class="code"><code class='highlight'><pre>  <span class="k">sealed</span> <span class="k">trait</span> <span class="nc">Shape</span>
  <span class="k">case</span> <span class="k">class</span> <span class="nc">Circle</span><span class="o">(</span><span class="n">center</span><span class="k">:</span> <span class="kt">Point</span><span class="o">,</span> <span class="n">radius</span><span class="k">:</span> <span class="kt">Double</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Shape</span>
  <span class="k">case</span> <span class="k">class</span> <span class="nc">Rectangle</span><span class="o">(</span><span class="n">bottomLeft</span><span class="k">:</span> <span class="kt">Point</span><span class="o">,</span> <span class="n">topRight</span><span class="k">:</span> <span class="kt">Point</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Shape</span>
  <span class="k">case</span> <span class="k">class</span> <span class="nc">Triangle</span><span class="o">(</span><span class="n">v1</span><span class="k">:</span> <span class="kt">Point</span><span class="o">,</span> <span class="n">v2</span><span class="k">:</span> <span class="kt">Point</span><span class="o">,</span> <span class="n">v3</span><span class="k">:</span> <span class="kt">Point</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Shape</span>

  <span class="c1">// compute the area inside a shape</span>
  <span class="k">def</span> <span class="n">area</span><span class="o">(</span><span class="n">shape</span><span class="k">:</span> <span class="kt">Shape</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="n">shape</span> <span class="k">match</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">Circle</span><span class="o">(</span><span class="n">center</span><span class="o">,</span> <span class="n">radius</span><span class="o">)</span> <span class="k">=&gt;</span>
      <span class="n">math</span><span class="o">.</span><span class="nc">Pi</span> <span class="o">*</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">radius</span>

    <span class="k">case</span> <span class="nc">Rectangle</span><span class="o">(</span><span class="nc">Point</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">y1</span><span class="o">),</span> <span class="nc">Point</span><span class="o">(</span><span class="n">x2</span><span class="o">,</span> <span class="n">y2</span><span class="o">))</span> <span class="k">=&gt;</span>
      <span class="n">math</span><span class="o">.</span><span class="n">abs</span><span class="o">((</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="o">)</span> <span class="o">*</span> <span class="o">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="o">))</span>

    <span class="k">case</span> <span class="nc">Triangle</span><span class="o">(</span><span class="nc">Point</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">y1</span><span class="o">),</span> <span class="nc">Point</span><span class="o">(</span><span class="n">x2</span><span class="o">,</span> <span class="n">y2</span><span class="o">),</span> <span class="nc">Point</span><span class="o">(</span><span class="n">x3</span><span class="o">,</span> <span class="n">y3</span><span class="o">))</span> <span class="k">=&gt;</span>
      <span class="n">math</span><span class="o">.</span><span class="n">abs</span><span class="o">(</span>
        <span class="mf">0.5</span> <span class="o">*</span> <span class="o">((</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x3</span><span class="o">)</span> <span class="o">*</span> <span class="o">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="o">)</span> <span class="o">-</span> <span class="o">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x2</span><span class="o">)</span> <span class="o">*</span> <span class="o">(</span><span class="n">y3</span> <span class="o">-</span> <span class="n">y1</span><span class="o">))</span>
      <span class="o">)</span>
  <span class="o">}</span></pre></code></div>
    </section>
    <section id='section-8'>
      <div class="docs"><p>compute the circumference (i. e., length of enclosing curve)
of a shape</p>

<p>In Scala, one can put ??? as a place holder for something
they have yet to implement. Beware that ??? may not work
correctly if the type of the expected expression is unknown.</p>

<p>Here and elsewhere, the student should replace ??? by
a real implementation.</p>

<p>The method <code>distance</code> may be useful here.</p>
</div>
      <div class="code"><code class='highlight'><pre>  <span class="k">def</span> <span class="n">circumference</span><span class="o">(</span><span class="n">shape</span><span class="k">:</span> <span class="kt">Shape</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="o">???</span>
<span class="o">}</span></pre></code></div>
    </section>
  </article>
</body>
</html>
